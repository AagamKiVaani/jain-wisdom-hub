name: Jain Wisdom Scheduler

on:
  schedule:
    # ðŸŒ… MORNING QUOTE: 5:45 AM IST (00:15 UTC)
    # - cron: '15 0 * * *'
    # - cron: '30 7 * * *'
    # - cron: '30 0 * * *'
    # - cron: '30 4 * * *'
    # New: 23:45 UTC (5:15 AM IST) - Runs BEFORE the rush hour!
    - cron: '45 23 * * *'

    # ðŸŒ™ EVENING TITHI CHECK: 7:00 PM IST (13:30 UTC)
    - cron: '30 13 * * *'


  workflow_dispatch: # Allows manual button click for testing

jobs:
  run-jobs:
    runs-on: ubuntu-latest
    steps:
      # Step 1: Check Morning Job
      - name: Trigger Morning Quote
        if: github.event.schedule == '15 0 * * *' || github.event_name == 'workflow_dispatch'
        run: |
          curl -X GET \
          -H "Authorization: Bearer ${{ secrets.AAGAM_CRON_KEY }}" \
          https://jain-wisdom-hub.vercel.app/api/cron/daily-quote

      # Step 2: Check Evening Job
      - name: Trigger Evening Tithi
        if: github.event.schedule == '30 13 * * *' || github.event_name == 'workflow_dispatch'
        run: |
          curl -X GET \
          -H "Authorization: Bearer ${{ secrets.AAGAM_CRON_KEY }}" \
          https://jain-wisdom-hub.vercel.app/api/cron/evening-notification